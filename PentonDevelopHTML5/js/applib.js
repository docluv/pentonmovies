var _gaq=_gaq||void 0,$=$||{};!function(a,b){"use strict";window.$=b||{},b.BODY_SCROLL_TOP=!1,b.getScrollTop=function(){var b=window,c=a;return b.pageYOffset||"CSS1Compat"===c.compatMode&&c.documentElement.scrollTop||c.body.scrollTop||0},b.hideUrlBar=function(){var a=window;location.hash||b.BODY_SCROLL_TOP===!1||a.scrollTo(0,1===b.BODY_SCROLL_TOP?0:1)},b.hideUrlBarOnLoad=function(){var a,c=window,d=c.document;!location.hash&&c.addEventListener&&(window.scrollTo(0,1),b.BODY_SCROLL_TOP=1,a=setInterval(function(){d.body&&(clearInterval(a),b.BODY_SCROLL_TOP=b.getScrollTop(),b.hideUrlBar())},15),c.addEventListener("load",function(){setTimeout(function(){b.getScrollTop()<20&&b.hideUrlBar()},0)}))},b.extend=function(){var a,b,c,d,e=arguments[0]||{},f=1,g=arguments.length;for(f=1;g>f;f++)if(null!==(d=arguments[f]))for(b in d)a=e[b],c=d[b],e!==c&&void 0!==c&&(e[b]=c);return e},b.loadScript=function(b,c,d){if(a.getElementById(b))d();else{var e=a.createElement("script");e.type="text/javascript",e.id=b,e.readyState?e.onreadystatechange=function(){("loaded"===e.readyState||"complete"===e.readyState)&&(e.onreadystatechange=null,d())}:e.onload=function(){d()},e.src=c,a.body.appendChild(e)}},b.getVendorPropertyName=function(b){var c,d,e=["Moz","Webkit","O","ms"],f=a.createElement("div"),g=b.charAt(0).toUpperCase()+b.substr(1);if(b in f.style)return b;for(d=0;d<e.length;++d)if(c=e[d]+g,c in f.style)return c;this.div=null},b.checkTransform3dSupport=function(){var c=a.createElement("div"),d=b.getVendorPropertyName("transform");return c.style[d]="",c.style[d]="rotateY(90deg)",""!==c.style[d]},b.buildVendorNames=function(){return{transition:b.getVendorPropertyName("transition"),transitionDelay:b.getVendorPropertyName("transitionDelay"),transform:b.getVendorPropertyName("transform"),transformOrigin:b.getVendorPropertyName("transformOrigin"),transform3d:b.checkTransform3dSupport()}},window.AddEvent=function(a,b,c,d){d=d||!1,c&&b&&a&&(a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent(b,c))},b.parseLocalStorage=function(a){var b=localStorage.getItem(a);return b?JSON.parse(b)||{}:{}},b.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},b.guid=function(){return b.s4()+b.s4()+"-"+b.s4()+"-"+b.s4()+"-"+b.s4()+"-"+b.s4()+b.s4()+b.s4()},b.data=function(a,b,c){return c=c||"",a.hasAttribute("data-"+b)?a.getAttribute("data-"+b):c},Node.prototype.removeClass=function(a){this.hasClass(a)&&(this.className=this.className.replace(" "+a+" "," ").replace(" "+a,"").replace(a+" ",""))},b.removeClass=function(a,b){(a&&b||"string"==typeof b)&&a.className.indexOf(b)>-1&&(a.className=a.className.replace(" "+b+" "," ").replace(" "+b,"").replace(b+" ",""))},Node.prototype.addClass=function(a){a&&"string"==typeof a&&(this.className+=" "+a)},b.addClass=function(a,b){(a&&b||"string"==typeof b)&&(a.className+=" "+b)},Node.prototype.hasClass=function(a){if(a&&"string"==typeof a){a=" "+a+" ";var b=/[\t\r\n]/g;return 1===this.nodeType&&(" "+this.className+" ").replace(b," ").indexOf(a)>=0?!0:!1}},b.hasClass=function(a,b){b=" "+b+" ",a.length||(a=[a]);for(var c=/[\t\r\n]/g,d=0,e=a.length;e>d;d++)if(1===a[d].nodeType&&(" "+a[d].className+" ").replace(c," ").indexOf(b)>=0)return!0;return!1},b.toggleClass=function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)},b.toggle=function(a,b){b=b||"block",a.style.display=""===a.style.display||"none"===a.style.display?b:"none"},b.show=function(a,b){b=b||"block",a.style.display=b},b.hide=function(a){a.style.display="none"},Node.prototype.show=function(a){a=a||"block",this.style.display=a},Node.prototype.hide=function(){this.style.display="none"},b.attr=function(a,b,c){return a?void 0===c?a.hasAttribute(b)?a.getAttribute(b):null:(a.setAttribute(b,c),this):void 0},b.noop=function(){}}(document,$),!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("reqwest",this,function(){function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,twoHundo.test(a.request.status)?b(a.request):c(a.request)),void 0)}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){"undefined"!=typeof b.withCredentials&&"undefined"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return i?"?"===i[3]?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,"undefined"==typeof j.onreadystatechange||l||(j.event="onclick",j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&"complete"!==j[readyState]&&"loaded"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),k=1,void 0)},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||"GET").toUpperCase(),f="string"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&"string"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return"jsonp"!=d.type&&"GET"!=e||!g||(f=urlappend(f,g),g=null),"jsonp"==d.type?handleJsonp(d,a,b,f):(c=xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case"input":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&""===e?"on":e)));break;case"textarea":b(g,normalize(a.value));break;case"select":if("select-one"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\[\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+"["+("object"==typeof g?f:"")+"]",g,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return"";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b="map"==a?serializeHash:"array"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b="function"==typeof b?b():null==b?"":b,f[f.length]=g(a)+"="+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)buildParams(c,a[c],e,h);return f.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b]},reqwest}),function(a,b,c){"use strict";var d=function(a){var c=new d.fn.init(a);return c.settings=b.extend({},c.settings,a),c};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.2",getTemplates:function(a){var c,d,e=document.querySelectorAll("script[type='"+this.settings.templateType+"']"),f=b.parseLocalStorage("templates");for(c=0;c<e.length;c++)d=e[c],f[d.id]=d.innerHTML.replace(/(\r\n|\n|\r)/gm,""),a&&d.parentNode&&d.parentNode.removeChild(d);return localStorage.setItem("templates",JSON.stringify(f)),f},storeTemplates:function(){var a,b=document.querySelectorAll("script[type='"+this.settings.templateType+"']");for(a=0;a<b.length;a++)this.saveTemplateToStorage(b[a])},saveTemplateToStorage:function(a){"string"==typeof a&&(a=document.getElementById(a)),a&&(localStorage.setItem(a.id,a.innerHTML.replace(/(\r\n|\n|\r)/gm,"")),a.parentNode&&a.parentNode.removeChild(a))},getTemplate:function(a){return"<script type='"+this.settings.templateType+"'>"+localStorage.getItem(a)+"</script>"},updateViews:function(a){var b,c=document.querySelectorAll(a);for(b=0;b<c.length;b++)this.saveViewToStorage(c[b])},hasClass:function(a,b){return a.className.search(b)>-1},saveViewToStorage:function(a){"string"==typeof a&&(a=document.getElementById(a)),a&&(this.storeViewInfo(this.parseViewInfo(a)),a.parentNode&&!this.hasClass(a,"current")&&a.parentNode.removeChild(a))},parseViewInfo:function(a){return{pageId:a.id,viewTitle:a.hasAttribute("data-title")?a.getAttribute("data-title"):this.settings.defaultTitle,tranistion:a.hasAttribute("data-transition")?a.getAttribute("data-transition"):"",content:a.outerHTML}},storeViewInfo:function(a){a=b.extend({},this.pageSettings,a),localStorage.setItem(a.pageId,JSON.stringify(a))},getViewData:function(b){var c,d=localStorage[b];return d||(c=document.getElementById(b),c&&(this.saveViewToStorage(c),d=a.localStorage[b])),d?JSON.parse(d):void 0},settings:{viewSelector:".content-pane",defaultTitle:"A Really Cool SPA App",deferredTimeKey:"lastDeferredTime",templateType:"text/x-mustache-template"},pageSettings:{pageId:"",url:"",css:c,js:c,templates:"",content:"",defaultTemplate:"#DefaultViewTemplate"}},d.fn.init.prototype=d.fn,a.backpack=d}(window,$),function(a,b,c){"use strict";HTMLElement.prototype.ha=HTMLElement.prototype.hasAttribute;var d=(document.querySelector,function(c,e){var f=new d.fn.init(c,e);return c?("string"==typeof c&&(c=document.querySelectorAll(c)),f.node="length"in c?c:[c],f.settings=b.extend({},f.settings,e),b.buildVendorNames(),f.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",f.hasMouse="ontouchstart"in a&&"onmousedown"in a,f.touchStart="pointer"===f.touchType?"MSPointerDown":"touch"===f.touchType?"touchstart":"mousedown",f.touchEnd="pointer"===f.touchType?"MSPointerUp":"touch"===f.touchType?"touchend":"mouseup",f.touchOut="pointer"===f.touchType?"MSPointerOut":"touch"===f.touchType?"touchcancel":"mouseout",f.touchMove="pointer"===f.touchType?"MSPointerMove":"touch"===f.touchType?"touchmove":"mousemove",f.touchCancel="pointer"===f.touchType?"MSPointerCancel":"touch"===f.touchType?"touchcancel":"mouseout",f.hasmsGesture?f.setupMSGesture():(f.setUpTouchGestures(),f.setupTouch()),f):c});return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.5",hasMouse:"",touchType:"",touchStart:"",touchEnd:"",touchOut:"",touchMove:"",touchCancel:"",hasmsGesture:a.MSGesture,setUpTouchGestures:function(){var a=this;try{[].forEach.call(this.node,function(b){b.addEventListener("gesturestart",function(a){a.preventDefault()}),b.addEventListener("gesturechange",function(b){a.gestureChange.call(a,b)}),b.gStartScale=1,b.gStartRotation=0})}catch(b){return console.error("setUpTouchGestures is broken \r\n"+tl.innerText),!1}},setupMSGesture:function(){var a=this,b=this.settings;try{[].forEach.call(this.node,function(c){var d=new MSGesture;d&&(d.target=c,c.addEventListener("MSPointerDown",function(e){d.addPointer(e.pointerId),a.setupSwipe(e,c,b)}),c.addEventListener("MSGestureChange",function(b){a.msGestureChange.call(a,b)}),c.addEventListener("MSPointerDown",function(d){a.doDoubleTap(d,c,b)}),c.addEventListener("MSGestureEnd",function(){a.endGesture()}))})}catch(c){return!1}},endGesture:function(){this.swipping=!1,this.swipeX=null,this.swipeY=null},swipeRightCallback:b.noop,swipeLeftCallback:b.noop,swipeUpCallback:b.noop,swipeDownCallback:b.noop,moveCallback:b.noop,moveHorizontalCallback:b.noop,moveVerticalCallback:b.noop,rotateCallback:b.noop,scaleCallback:b.noop,tapCallback:b.noop,doubleTapCallback:b.noop,processGestureChange:function(a,b){var c=this,d=this.settings,e=a.target;e.ha(d.rotateIndicator)&&Math.abs(a.rotation)>d.rotateThreshold&&(d.autoRotate&&(e.style.transform=b.rotate(180*a.rotation/Math.PI)),this.rotateCallback(a,b)),e.ha(d.scaleIndicator)&&Math.abs(a.scale)>d.scaleThreshold&&(d.autoScale&&(e.style.transform=b.scale(a.scale)),this.scaleCallback(a,b)),e.ha(d.moveIndicator)&&(Math.abs(a.translationX)>d.moveThreshold||Math.abs(a.translationY)>d.moveThreshold)&&(d.autoMove&&(e.style.transform=b.translate(a.translationX,a.translationY,0)),this.moveCallback(a,b)),e.ha(d.horizontalIndicator)&&Math.abs(a.translationX)>d.moveThreshold&&(d.autoHorizontalMove&&(a.target.style.transform=b.translate(a.translationX,0,0)),this.moveHorizontalCallback(a,b)),e.ha(d.verticalIndicator)&&Math.abs(a.translationY)>d.moveThreshold&&(d.autoVerticalMove&&(a.target.style.transform=b.translate(0,a.translationY,0)),this.moveVerticalCallback(a,b)),c.processSwipe(e,a,d,b)},processSwipe:function(a,b,c,d){var e=this;if(d=d||{},a.ha(c.swipeRight)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.ha(c.swipeRightInit)&&b.clientX>e.swipeX&&b.clientX-e.swipeX>c.swipeRightThreshold&&(e.swipping||(e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeRightCallback(b,d)))),a.ha(c.swipeLeft)&&!e.swipping&&(null===e.swipeX?e.swipeX=b.clientX:a.ha(c.swipeLeftInit)&&b.clientX<e.swipeX&&b.clientX-e.swipeX<c.swipeLeftThreshold&&(e.swipping||(e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeLeftCallback(b,d)))),a.ha(c.swipeUp)&&!e.swipping)if(null===e.swipeY)e.swipeY=b.clientY;else{var f=b.clientY>=0?b.clientY:0;a.ha(c.swipeUpInit)&&b.clientY<e.swipeY&&f-e.swipeY<c.swipeUpThreshold&&(e.swipping||(console.info("swipeUp"),e.swipping=!0,e.swipeX=null,e.swipeY=null,e.swipeUpCallback(b,d)))}a.ha(c.swipeDown)&&!e.swipping&&(null===e.swipeY?e.swipeY=b.clientY:a.ha(c.swipeDownInit)&&b.clientY>e.swipeY&&b.clientY-e.swipeY>c.swipeDownThreshold&&(e.swipping||(console.info("swipe Down"),e.swipping=!0,e.swipeY=null,e.swipeX=null,e.swipeDownCallback(b,d))))},swipping:!1,swipeX:null,swipeY:null,gestureChange:function(a){var b=a.target,c=this.settings;a.preventDefault(),console.info("gesture Change \r\n"+b.ha(c.rotateIndicator)+"\r\n"),b.ha(c.rotateIndicator)&&Math.abs(a.rotation)>c.rotateThreshold&&(b.style.webkitTransform="rotate("+(b.gStartRotation+a.rotation)+"deg)",this.rotateCallback(a,m)),b.ha(c.scaleIndicator)&&Math.abs(a.scale)>c.scaleThreshold&&(b.style.webkitTransform="scale("+b.gStartScale*a.scale+") ",this.scaleCallback(a,m))},msGestureChange:function(b){a.MSCSSMatrix&&this.processGestureChange(b,new MSCSSMatrix(b.target.style.transform))},calculateTranslation:function(a,b){return{translationX:b.x-a.x,translationY:b.y-a.y}},setupIndicator:function(a,b,d,e,f){var g=this,h=g.settings;a!==c&&(g[b]=a),d&&(g.settings[e]=d),[].forEach.call(g.node,function(a){a.setAttribute(h[f],"true")})},PreventDefaultManipulationAndMouseEvent:function(a){return a.preventDefault?(a.preventDefault(),void 0):a.preventManipulation?(a.preventManipulation(),void 0):a.preventMouseEvent?(a.preventMouseEvent(),void 0):void 0},getTouchPoints:function(a){var b,c=this,d="undefined"!=typeof a.changedTouches?a.changedTouches:[a],e=d[d.length-1];return b="pointer"===c.touchType?{x:e.x,y:e.y}:"touch"===c.touchType?{x:e.pageX,y:e.pageY}:{x:a.pageX,y:a.pageY}},node:c,div:c,support:{},doDoubleTap:function(a,b,c){var d=this;b.ha(c.doubleTapIndicator)&&b.ha(c.doubleTapStart)&&(b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart)),d.doubleTapCallback(a)),b.ha(c.doubleTapIndicator)&&!b.ha(c.doubleTapStart)&&b.setAttribute(c.doubleTapStart,setTimeout(function(){b.removeAttribute(c.doubleTapStart),clearTimeout(b.getAttribute(c.doubleTapStart))},c.doubleTapThreshold))},setupSwipe:function(a,b,c){var d=this;b.ha(c.swipeRight)&&(b.removeAttribute(c.swipeRightEnd),b.ha(c.swipeRightInit)||b.setAttribute(c.swipeRightInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeLeft)&&(b.removeAttribute(c.swipeLeftEnd),b.ha(c.swipeLeftInit)||b.setAttribute(c.swipeLeftInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeUp)&&(b.removeAttribute(c.swipeUpEnd),b.ha(c.swipeUpInit)||b.setAttribute(c.swipeUpInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.swipeDown)&&(b.removeAttribute(c.swipeDownEnd),b.ha(c.swipeDownInit)||b.setAttribute(c.swipeDownInit,JSON.stringify(d.getTouchPoints(a))))},setupTouch:function(){var a=this,b=this.settings;[].forEach.call(this.node,function(c){var d=function(d){d.preventDefault(),a.touchMoveHandler.call(a,d,c,b)},e=function(d){d.preventDefault(),a.endTouchHandler.call(a,d,c,b)},f=function(d){d.preventDefault(),a.startTouchHandler.call(a,d,c,b)};c.addEventListener(a.touchStart,f),c.addEventListener(a.touchMove,d),c.addEventListener(a.touchEnd,e),c.addEventListener(a.touchCancel,e),c.addEventListener("mouseout",e),c.addEventListener("mouseup",e),c.addEventListener(a.touchEnd,function(){console.info("touchEnd")}),c.addEventListener("mouseout",function(){console.info("mouseout")}),c.addEventListener("mouseup",function(){console.info("mouseup")}),c.addEventListener(a.touchCancel,function(){console.info("touchCancel")}),c.addEventListener(a.touchOut,function(){console.info("touchOut")}),a.hasMouse&&(c.addEventListener("mousedown",f),c.addEventListener("mousemove",d),c.addEventListener("mouseup",e))})},startTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),console.info("touch start"),b.ha(c.moveIndicator)&&(b.removeAttribute(c.moveTouchEnded),b.ha(c.moveTouchInitial)||b.setAttribute(c.moveTouchInitial,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.horizontalIndicator)&&(b.removeAttribute(c.horizontalTouchEnd),b.ha(c.horizontalTouchInit)||b.setAttribute(c.horizontalTouchInit,JSON.stringify(d.getTouchPoints(a)))),b.ha(c.verticalIndicator)&&(b.removeAttribute(c.verticalTouchEnd),b.ha(c.verticalTouchInit)||b.setAttribute(c.verticalTouchInit,JSON.stringify(d.getTouchPoints(a)))),d.setupSwipe(a,b,c),b.ha(c.tapIndicator)&&!b.ha(c.tapStart)&&b.setAttribute(c.tapStart,setTimeout(function(){clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.doubleTapStart)},700)),d.doDoubleTap(a,b,c)},endTouchHandler:function(a,b,c){var d=this;c=this.settings,a.preventDefault(),b.ha(c.moveTouchInitial)&&b.setAttribute(c.moveTouchEnded,"true"),b.ha(c.horizontalIndicator)&&b.setAttribute(c.horizontalTouchEnd,"true"),b.ha(c.verticalIndicator)&&b.setAttribute(c.verticalTouchEnd,"true"),b.ha(c.swipeRight)&&(d.swipping=!1,b.setAttribute(c.swipeRightEnd,"true"),b.removeAttribute(c.swipeRightInit)),b.ha(c.swipeLeft)&&(d.swipping=!1,b.setAttribute(c.swipeLeftEnd,"true"),b.removeAttribute(c.swipeLeftInit)),b.ha(c.swipeUp)&&(d.swipping=!1,b.setAttribute(c.swipeUpEnd,"true"),b.removeAttribute(c.swipeUpInit)),b.ha(c.swipeDown)&&(d.swipping=!1,b.setAttribute(c.swipeDownEnd,"true"),b.removeAttribute(c.swipeDownInit)),b.ha(c.tapIndicator)&&b.ha(c.tapStart)&&(d.tapCallback(a),clearTimeout(b.getAttribute(c.tapStart)),b.removeAttribute(c.tapStart))},touchMoveHandler:function(a,b,c){var d=this;if(c=this.settings,a.preventDefault(),b.ha(c.moveIndicator)&&!b.ha(c.moveTouchEnded)&&b.ha(c.moveTouchInitial)&&(e=JSON.parse(b.getAttribute(c.moveTouchInitial)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f),b.style[d.support.transform]="translate3D("+g.translationX+"px, "+g.translationY+"px, 0)"),b.ha(c.horizontalIndicator)&&!b.ha(c.horizontalTouchEnd)&&b.ha(c.horizontalTouchInit)){console.log("should -horizontal move");var e=JSON.parse(b.getAttribute(c.horizontalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationX)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D("+g.translationX+"px, 0, 0)")}if(b.ha(c.verticalIndicator)&&!b.ha(c.verticalTouchEnd)&&b.ha(c.verticalTouchInit)){var e=JSON.parse(b.getAttribute(c.verticalTouchInit)),f=d.getTouchPoints(a),g=d.calculateTranslation(e,f);Math.abs(g.translationY)>d.settings.moveThreshold&&(b.style[d.support.transform]="translate3D(0, "+g.translationY+"px, 0)")}(b.ha(c.swipeRightInit)||b.ha(c.swipeLefttInit)||b.ha(c.swipeUpInit)||b.ha(c.swipeDownInit))&&(a.touches&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY),d.processSwipe(b,a,c))},swipeRight:function(a,b){return this.setupIndicator(a,"swipeRightCallback",b,"swipeRightThreshold","swipeRight"),this},swipeLeft:function(a,b){return this.setupIndicator(a,"swipeLeftCallback",b,"swipeLeftThreshold","swipeLeft"),this},swipeUp:function(a,b){return this.setupIndicator(a,"swipeUpCallback",b,"swipeUpThreshold","swipeUp"),this},swipeDown:function(a,b){return this.setupIndicator(a,"swipeDownCallback",b,"swipeDownThreshold","swipeDown"),this},move:function(a){return this.setupIndicator(a,"moveCallback",0,"","moveIndicator"),this},horizontalMove:function(a){return this.setupIndicator(a,"moveHorizontalCallback",0,"","horizontalIndicator"),this},verticalMove:function(a){return this.setupIndicator(a,"moveVerticalCallback",0,"","verticalIndicator"),this},rotate:function(a){return this.setupIndicator(a,"rotateCallback",0,"","rotateIndicator"),this},scale:function(a){return this.setupIndicator(a,"scaleCallback",0,"","scaleIndicator"),this},tap:function(a){var c=this;return a||(a=b.noop),c.hasmsGesture?[].forEach.call(this.node,function(b){b.addEventListener("MSGestureTap",a,!1)}):this.setupIndicator(a,"tapCallback",0,"","tapIndicator"),this},dblTap:function(a){var b=this.settings;return document.querySelector(".touch-log"),a&&(b.doubleTapCallback=a),this.setupIndicator(a,"doubleTapCallback",0,"","doubleTapIndicator"),this},tapHold:function(a,b,c){var d=this;return a&&(d.tapHoldBeginCallback=a),this.hasmsGesture?(d.tapHoldBeginCallback=a,d.tapHoldEndCallback=b,d.tapHoldCancelCallback=c,[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener("MSGestureHold",function(a){d.tapHoldCallback.call(d,a)},!1)})):[].forEach.call(this.node,function(a){d.preventTapHoldContext(a),a.addEventListener(d.touchStart,function(b){d.setupTapHold(a,b)}),d.hasMouse&&a.addEventListener("mousedown",function(b){d.setupTapHold(a,b)})},!1),this},preventTapHoldContext:function(a){a.addEventListener("contextmenu",function(a){a.preventDefault()},!1)},setupTapHold:function(a,b){var c,d=this;c=setTimeout(function(){d.tapHoldBeginCallback.call(d,b),clearTimeout(c)},500),a.addEventListener(d.touchEnd,function(){clearTimeout(c)},!1),a.addEventListener(d.touchCancel,function(){clearTimeout(c)},!1)},tapHoldBeginCallback:b.noop,tapHoldEndCallback:b.noop,tapHoldCancelCallback:b.noop,tapHoldCallback:function(a){var b=this;a.preventDefault(),a.detail&a.MSGESTURE_FLAG_BEGIN&&b.tapHoldBeginCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_END&&b.tapHoldEndCallback.call(b,a),a.detail&a.MSGESTURE_FLAG_CANCEL&&b.tapHoldCancelCallback.call(b,a)},settings:{allowPageScroll:!0,logging:!1,swipeRightThreshold:25,swipeLeftThreshold:-25,swipeUpThreshold:-25,swipeDownThreshold:25,moveThreshold:0,rotateThreshold:0,scaleThreshold:0,doubleTapThreshold:700,tapIndicator:"data-tap",tapStart:"data-tap-start",tapEnded:"data-tap-end",doubleTapIndicator:"data-dbltap",doubleTapStart:"data-dbltap-start",doubleTapEnded:"data-dbltap-end",rotateIndicator:"data-rotate",rotateEnded:"data-rotate-ended",rotateInitial:"data-rotate-initial",scaleIndicator:"data-scale",scaleEnded:"data-scale-ended",scaleInitial:"data-scale-initial",moveIndicator:"data-move",moveTouchEnded:"data-move-touch-ended",moveTouchInitial:"data-move-touch-initial",swipeRight:"data-swiperight",swipeRightInit:"data-swiperight-init",swipeRightEnd:"data-swiperight-end",swipeLeft:"data-swipeleft",swipeLeftInit:"data-swipeLeft-init",swipeLeftEnd:"data-swipeleft-end",swipeUp:"data-swipeup",swipeUpInit:"data-swipeup-init",swipeUpEnd:"data-swipeup-end",swipeDown:"data-swipedown",swipeDownInit:"data-swipedown-init",swipeDownEnd:"data-swipedown-end",horizontalIndicator:"data-move-horizontal",horizontalTouchInit:"data-horizontal-touch-initial",horizontalTouchEnd:"data-horizontal-touch-ended",verticalIndicator:"data-move-vertical",verticalTouchInit:"data-vertical-touch-initial",verticalTouchEnd:"data-vertical-touch-ended",autoMove:!0,autoRotate:!0,autoScale:!0,autoHorizontalMove:!0,autoVerticalMove:!0}},d.fn.init.prototype=d.fn,a.deeptissue=d}(window,$),function(a,b,c){"use strict";var d=function(a,c){if(!a)return a;if("string"==typeof a&&(a=document.querySelector(a),!a))return a;"length"in a&&(a=a[0]);var e=new d.fn.init,f=e.settings=b.extend({},e.settings,c);return e.support=b.buildVendorNames(),e.support.transitionEnd=e.eventNames[e.support.transition]||null,e.setupToolbarElements(a,f),e.applyTransitionEnd(),e.setToolbarMenu(f.menuItems),e};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.4",toolbar:c,topMenu:c,subMenu:c,expandTarget:c,hasMouse:"",touchType:"",touchStart:"",div:c,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},setToolbarMenu:function(b){var c=0,d="",e="",f=this,g=f.settings;if(f.expandToolbar(!0),f.topMenu.innerHTML="",f.subMenu.innerHTML="",b.topMenu)for(c=0;c<b.topMenu.length;c++)d+=f.parseMenuItem(b.topMenu[c],g.toolbarItemTemplate);if(b.subMenu)for(c=0;c<b.subMenu.length;c++)e+=f.parseMenuItem(b.subMenu[c],g.subMenuItemTemplate);c=b.topMenu.length,""===d&&""===e?f.toolbar.style.display="none":(d+="<div class='expand-toolbar'>...</div>",c++,f.topMenu.innerHTML=d,f.subMenu.innerHTML=e,f.setIconWidth(c),f.setOrientation(),a.addEventListener("resize",function(){f.setIconWidth(c),f.setOrientation()}),f.expandTarget=f.toolbar.querySelector(g.expandTargetSelector),f.setupExpand(),f.bindCallBacks(b),f.bindAutoCollapse())},parseMenuItem:function(a,b){return b.replace("{{title}}",a.title).replace("{{url}}",a.url).replace("{{iconClass}}",a.iconClass)},setIconWidth:function(b){var c=this.settings,d=document.querySelector(c.topMenuItemSelector).clientWidth,e=a.innerWidth,f=Math.floor(98*((e-b*d)/(2*b)/e)),g=document.querySelectorAll(c.topMenuItemSelector),h=document.querySelector(c.topMenuItemSelector);for(b=0;b<g.length;b++)g[b].style.marginRight=f+"%",g[b].style.marginLeft=f+"%";h&&(h.style.marginRight=f+"%",h.style.marginLeft=f+"%")},setOrientation:function(){this.toolbar.orientation=a.innerWidth<a.innerHeight?"portrait":"landscape"},bindCallBacks:function(a){var b,c=0,d=this;for(c=0;c<a.topMenu.length;c++)b=a.topMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback);for(c=0;c<a.subMenu.length;c++)b=a.subMenu[c],b.callback&&d.bindTapEvent(document.querySelector("."+b.iconClass),b.callback)},buildTransitionValue:function(a){var b=this.settings;return a+" "+b.expandSpeed+"ms "+b.easing},setupToolbarElements:function(a,b){var c=this;
c.toolbar=a,c.topMenu=c.toolbar.querySelector(b.topMenuSelector),c.subMenu=c.toolbar.querySelector(b.subMenuSelector)},applyTransitionEnd:function(){var a=this;a.toolbar.addEventListener(a.support.transitionEnd,function(b){a.transitionEnd(b)})},transitionEnd:function(){this.toolbar.style[this.support.transition]=""},setupTouch:function(){var b=this;b.touchType=a.navigator.msPointerEnabled?"pointer":"ontouchstart"in a?"touch":"mouse",b.hasMouse="ontouchstart"in a&&"onmousedown"in a,b.touchStart="pointer"===this.touchType?"MSPointerDown":"touch"===this.touchType?"touchstart":"mousedown"},setupExpand:function(){var a=this;a.setupTouch(),a.bindTapEvent(a.expandTarget,function(b){b.preventDefault(),a.expandToolbar()})},bindAutoCollapse:function(){var a=this,b=0,c=document.querySelectorAll(a.settings.topMenuItemSelector+", "+a.settings.subMenuSelector);for(b=0;b<c.length;b++)a.bindTapEvent(c[b],function(){a.expandToolbar(!0)})},bindTapEvent:function(a,b){var c=this;a&&(a.addEventListener(c.touchStart,function(a){b.call(c,a)}),c.hasMouse&&a.addEventListener("mousedown",function(a){b.call(c,a)}))},expandToolbar:function(a){var b,d,e=this,f=e.settings,g=e.toolbar;(a!==!0||g.expanded!==c&&g.expanded!==!1)&&(g.style[e.support.transition]="portrait"===g.orientation?e.buildTransitionValue("height"):e.buildTransitionValue("width"),g.expanded?("portrait"===g.orientation?g.style.height=f.minHeight+"px":g.style.width=f.minWidth+"px",g.expanded=!1):(b=e.topMenu!==c?e.topMenu.getBoundingClientRect():{height:"0px",width:"0px"},d=e.subMenu!==c?e.subMenu.getBoundingClientRect():{height:"0px",width:"0px"},"portrait"===e.toolbar.orientation?g.style.height=b.height+d.height+"px":f.menuItems.subMenu.length>0&&(g.style.width=f.expandWidth+"px"),g.expanded=!0))},settings:{minHeight:35,minWidth:42,expandWidth:200,collapseOnSelect:!0,mainSelector:".toolbar",topMenuSelector:".toolbar-top-menu",subMenuSelector:".toolbar-sub-menu",expandTargetSelector:".expand-toolbar",topMenuItemSelector:".toolbar-item",menuItems:{topMenu:[],subMenu:[]},toolbarItemTemplate:"<div class='toolbar-item'><a href='{{url}}'><div class='toolbar-item-icon {{iconClass}}'></div><figcaption>{{title}}</figcaption></a></div>",subMenuItemTemplate:"<a href='{{url}}'><div class='toolbar-sub-menu-nav-item {{iconClass}}'>{{title}}</div></a>",topLevelItems:[],secondLevelItems:[],expandSpeed:1e3,that:c,easing:"ease-in-out"}},d.fn.init.prototype=d.fn,a.toolbar=d}(window,$),function(a,b){if("object"==typeof exports&&exports)b(exports);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(this,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function f(a){this.string=a,this.tail=a,this.pos=0}function g(a,b){this.view=a||{},this.parent=b,this._cache={}}function h(){this.clearCache()}function i(b,c,d,e){for(var f,g,h,j="",k=0,l=b.length;l>k;++k)switch(f=b[k],g=f[1],f[0]){case"#":if(h=d.lookup(g),"object"==typeof h)if(v(h))for(var m=0,n=h.length;n>m;++m)j+=i(f[4],c,d.push(h[m]),e);else h&&(j+=i(f[4],c,d.push(h),e));else if("function"==typeof h){var o=null==e?null:e.slice(f[3],f[5]);h=h.call(d.view,o,function(a){return c.render(a,d)}),null!=h&&(j+=h)}else h&&(j+=i(f[4],c,d,e));break;case"^":h=d.lookup(g),(!h||v(h)&&0===h.length)&&(j+=i(f[4],c,d,e));break;case">":h=c.getPartial(g),"function"==typeof h&&(j+=h(d));break;case"&":h=d.lookup(g),null!=h&&(j+=h);break;case"name":h=d.lookup(g),null!=h&&(j+=a.escape(h));break;case"text":j+=g}return j}function j(a){for(var b,c=[],d=c,e=[],f=0,g=a.length;g>f;++f)switch(b=a[f],b[0]){case"#":case"^":e.push(b),d.push(b),d=b[4]=[];break;case"/":var h=e.pop();h[5]=b[2],d=e.length>0?e[e.length-1][4]:c;break;default:d.push(b)}return c}function k(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(c=b,d.push(b)));return d}function l(a){return[new RegExp(d(a[0])+"\\s*"),new RegExp("\\s*"+d(a[1]))]}function m(b,e){function g(){if(z&&!A)for(;y.length;)delete x[y.pop()];else y=[];z=!1,A=!1}if(b=b||"",e=e||a.tags,"string"==typeof e&&(e=e.split(o)),2!==e.length)throw new Error("Invalid tags: "+e.join(", "));for(var h,i,m,p,t,u=l(e),v=new f(b),w=[],x=[],y=[],z=!1,A=!1;!v.eos();){if(h=v.pos,m=v.scanUntil(u[0]))for(var B=0,C=m.length;C>B;++B)p=m.charAt(B),c(p)?y.push(x.length):A=!0,x.push(["text",p,h,h+1]),h+=1,"\n"==p&&g();if(!v.scan(u[0]))break;if(z=!0,i=v.scan(s)||"name",v.scan(n),"="===i?(m=v.scanUntil(q),v.scan(q),v.scanUntil(u[1])):"{"===i?(m=v.scanUntil(new RegExp("\\s*"+d("}"+e[1]))),v.scan(r),v.scanUntil(u[1]),i="&"):m=v.scanUntil(u[1]),!v.scan(u[1]))throw new Error("Unclosed tag at "+v.pos);if(t=[i,m,h,v.pos],x.push(t),"#"===i||"^"===i)w.push(t);else if("/"===i){if(0===w.length)throw new Error('Unopened section "'+m+'" at '+h);var D=w.pop();if(D[1]!==m)throw new Error('Unclosed section "'+D[1]+'" at '+h)}else if("name"===i||"{"===i||"&"===i)A=!0;else if("="===i){if(e=m.split(o),2!==e.length)throw new Error("Invalid tags at "+h+": "+e.join(", "));u=l(e)}}var D=w.pop();if(D)throw new Error('Unclosed section "'+D[1]+'" at '+v.pos);return x=k(x),j(x)}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(a){var b=this.tail.match(a);return b&&0===b.index?(this.tail=this.tail.substring(b[0].length),this.pos+=b[0].length,b[0]):""},f.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b},g.make=function(a){return a instanceof g?a:new g(a)},g.prototype.push=function(a){return new g(a,this)},g.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var d=a.split("."),e=0;b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return"function"==typeof b&&(b=b.call(this.view)),b},h.prototype.clearCache=function(){this._cache={},this._partialCache={}},h.prototype.compile=function(b,c){var d=this._cache[b];if(!d){var e=a.parse(b,c);d=this._cache[b]=this.compileTokens(e,b)}return d},h.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);return this._partialCache[a]=d,d},h.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]},h.prototype.compileTokens=function(a,b){var c=this;return function(d,e){if(e)if("function"==typeof e)c._loadPartial=e;else for(var f in e)c.compilePartial(f,e[f]);return i(a,c,g.make(d),b)}},h.prototype.render=function(a,b,c){return this.compile(a)(b,c)},a.name="mustache.js",a.version="0.7.2",a.tags=["{{","}}"],a.Scanner=f,a.Context=g,a.Writer=h,a.parse=m,a.escape=e;var x=new h;a.clearCache=function(){return x.clearCache()},a.compile=function(a,b){return x.compile(a,b)},a.compilePartial=function(a,b,c){return x.compilePartial(a,b,c)},a.compileTokens=function(a,b){return x.compileTokens(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,d,e){var f=a.render(b,c,d);return"function"!=typeof e?f:(e(f),void 0)}}),function(a,b,c){"use strict";var d=function(a,c){var e=new d.fn.init(a,c);return e.settings=b.extend({},e.settings,c),e.setupElements(a),e.resizePanorama(),e.buildTransitionValue(),e.buildVendorNames(),e.support.transitionEnd=e.eventNames[e.support.transition]||null,e.bindEvents(),e.moveRightCallback(),e.currentPanel=2,e};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.2",div:c,currentPanel:1,leftPanel:1,totalPanels:1,support:{},eventNames:{MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},headerTransitionValue:"all 1000ms ease-in-out",transitionValue:"all 1000ms ease-in-out",fastTransition:"all 0ms",buildTransitionValue:function(){return this.transitionValue="all "+this.settings.speed+"ms "+this.settings.easing,this.headerTransitionValue="all "+(this.settings.speed-100)+"ms "+this.settings.easing,this},buildVendorNames:function(){this.div=document.createElement("div"),this.support.transition=b.getVendorPropertyName("transition"),this.support.transitionDelay=b.getVendorPropertyName("transitionDelay"),this.support.transform=b.getVendorPropertyName("transform"),this.support.transformOrigin=b.getVendorPropertyName("transformOrigin"),this.support.transform3d=b.checkTransform3dSupport(),this.div=null},setPanoramaDimensions:function(){var a=this.settings,b=a.panelWidth-a.peekWidth,c=(a.headerHeight,3*a.panelWidth),d=a.panelHeight-a.headerHeight-a.bottomMargin;this.container.style.height=d+"px",this.panelbody.style.height=d+"px",this.panelbody.style.width=this.totalPanels*b+"px",this.panelbody.style.left=-b+"px";for(var e=0;e<this.panels.length;e++)this.panels[e].style.width=b+"px";if(this.headerPanels.length>1){c=0;for(var e=0;e<this.headerPanels.length;e++)c+=this.headerPanels[e].offsetWidth;c=1.35*c}if(this.header){var f=this.header.style;this.headerPanels&&this.headerPanels.length>0?(f.width=c+"px",f.left=-parseInt(this.headerPanels[0].offsetWidth,10)+"px"):(f.width=c+"px",f.paddingLeft=f.paddingRight=a.panelWidth+"px",f.left=this.settings.bigHeaderLeft=-this.settings.panelWidth+"px")}},clearPanoramaSettings:function(){var a=0,b=this.panelbody;for(b.style.height=b.style.top=b.style.width=b.style.left=this.container.style.height="",a=0;a<this.panels.length;a++)this.panels[a].style.minHeight=this.panels[a].style.width="";this.header&&(this.header.style.width=this.headerPanels&&this.headerPanels.length>0?this.header.style.left="":this.header.style.paddingLeft=this.header.style.paddingRight=this.header.style.left=this.settings.bigHeaderLeft="")},setupElements:function(a){this.container=a?a:document.querySelector(this.settings.container),this.panelbody=document.querySelector(this.settings.container+"  "+this.settings.panoramaSelector),this.panels=document.querySelectorAll(this.settings.container+"  "+this.settings.panoramaSelector+"  "+this.settings.singleColumnSelector),this.totalPanels=this.panels.length,this.header=document.querySelector(this.settings.headerStyle),this.headerPanels=document.querySelectorAll(this.settings.headerPanelStyle)},bindEvents:function(){var b=this;this.panelbody.addEventListener(this.support.transitionEnd,function(){b.tEndCB!==c&&b.tEndCB(),b.tHeaderEndCB!==c&&b.tHeaderEndCB()}),a.addEventListener("resize",function(a){b.resizePanorama(a)})},resizePanorama:function(){var b=this.settings;b.windowWidth=a.innerWidth,b.panelWidth=a.innerWidth,b.panelHeight=a.innerHeight,b.maxWidth<=a.innerWidth||b.maxHeight<=a.innerHeight?(b.canMove=!1,this.clearPanoramaSettings()):(b.canMove=!0,this.setPanoramaDimensions())},tEndCB:c,tHeaderEndCB:c,moveQue:[],moving:!1,executeMove:function(){var a=this.moveQue.shift();a!==c?(this.moving=!0,this.tEndCB=a.cb,this.panelbody.style[this.support.transition]=this.transitionValue,this.panelbody.style[this.support.transform]=this.support.transform3d?"translate3D("+a.value+"px, 0, 0)":"translateX("+a.value+"px)"):this.moving=!1},movePanels:function(a,b){var c={cb:b,value:a};this.moving||(this.moveQue.push(c),this.moving||this.executeMove())},_movePrevCB:[],_moveNextCB:[],moveHeader:function(a){var b=this,d=0;if(a===c&&(a=!0),b.header){if(b.headerPanels&&b.headerPanels.length>1)d=a?-parseInt(b.headerPanels[1].offsetWidth,10):parseInt(b.headerPanels[0].offsetWidth,10),b.header.style[b.support.transition]=b.headerTransitionValue,b.header.style[b.support.transform]=b.support.transform3d?"translate3D("+d+"px, 0, 0)":"translateX("+d+"px)";else{2==this.currentPanel?this.bigHeaderTrans=0:a?this.bigHeaderTrans-=b.settings.panelWidth*b.settings.headerSlide:this.bigHeaderTrans+=b.settings.panelWidth*b.settings.headerSlide;var e=document.querySelector(".big-header");e.style[b.support.transition]=b.headerTransitionValue,e.style[b.support.transform]=b.support.transform3d?"translate3D("+this.bigHeaderTrans+"px, 0, 0)":"translateX("+this.bigHeaderTrans+"px)"}b.tHeaderEndCB=a?b.headerPanels.length>1?b.endHeaderLeft:function(){b.endBigHeaderLeft(d)}:b.headerPanels.length>1?b.endHeaderRight:function(){b.endBigHeaderRight(d)}}},endBigHeaderLeft:function(){},endBigHeaderRight:function(){},endHeaderLeft:function(){var a=this,b=a.headerPanels;a.header.style[a.support.transition]=a.fastTransition,a.header.appendChild(this.getFirstPanel(b)),a.header.style[a.support.transform]="",a.headerPanels=document.querySelectorAll(a.settings.headerPanelStyle),this.header.style.left=-parseInt(this.headerPanels[0].offsetWidth,10)+"px"},endHeaderRight:function(){var a=this,b=a.headerPanels;a.header.style[a.support.transition]=a.fastTransition,a.header.insertBefore(a.getLastPanel(b),a.header.firstChild),a.header.style[a.support.transform]="",a.headerPanels=document.querySelectorAll(a.settings.headerPanelStyle),this.header.style.left=-parseInt(this.headerPanels[0].offsetWidth,10)+"px"},movePrevious:function(a){return a&&this._movePrevCB.push(a),this},moveNext:function(a){return a&&this._moveNextCB.push(a),this},moveLeft:function(a,b){var c=(a.target,0);for(b=b||this.settings.panelWidth-this.settings.peekWidth,this.currentPanel+=1,this.currentPanel>this.totalPanels&&(this.currentPanel=1),this.moveHeader(!0),this.movePanels(-b,this.moveLeftCallback),c=0;c<this._moveNextCB.length;c++)this._moveNextCB[c]&&this._moveNextCB[c].call(this.currentPanel)},moveRight:function(a,b){var c=(a.target,0);for(b=b||this.settings.panelWidth-this.settings.peekWidth,this.currentPanel-=1,this.currentPanel<1&&(this.currentPanel=this.totalPanels),this.moveHeader(!1),this.movePanels(b,this.moveRightCallback),c=0;c<this._movePrevCB.length;c++)this._movePrevCB[c]&&this._movePrevCB[c].call(this.currentPanel)},moveLastPanel:function(){var a=this.panelbody,b=a.childNodes;a.style[this.support.transition]=this.fastTransition,a.appendChild(this.getFirstPanel(b)),a.style[this.support.transform]=""},moveLeftCallback:function(a){a=a||this.panelbody;var b=a.childNodes;a.style[this.support.transition]=this.fastTransition,a.appendChild(this.getFirstPanel(b)),a.style[this.support.transform]="",this.moving=!1,this.executeMove()},moveRightCallback:function(a){a=a||this.panelbody;var b=a.childNodes;a.style[this.support.transition]=this.fastTransition,a.insertBefore(this.getLastPanel(b),a.firstChild),a.style[this.support.transform]="",this.moving=!1,this.executeMove()},getFirstPanel:function(a){var b;for(b=0;b<a.length;b++)if(1===a[b].nodeType)return a[b]},getLastPanel:function(a){var b;for(b=a.length-1;0!==b;b--)if(1===a[b].nodeType)return a[b]},moveCallback:function(a,b){this.movePanels(b,this.moveLeftCallback)},container:c,panelbody:c,panels:c,header:c,headerPanels:c,bigHeaderTrans:0,settings:{panoramaSelector:".panorama-panels",container:".panorama-container",singleColumnSelector:".single-panel",doubleColumnSelector:".double-panel",speed:150,windowWidth:a.innerWidth,panelWidth:a.innerWidth,panelHeight:a.innerHeight,peekWidth:35,easing:"ease-in-out",nextScroll:".panorama-next",prevScroll:".panorama-prev",navWrapper:".panorama-navigation",showPrevNext:!1,headerSlide:.2,bigHeaderLeft:0,headerStyle:".panorama-header",headerPanelStyle:".panorama-panel-header",headerHeight:40,bottomMargin:35}},d.fn.init.prototype=d.fn,a.panorama=d}(window,$),function(a,b,c){"use strict";var d=function(c){var e=new d.fn.init;return e.settings=b.extend({},e.settings,c),e.bp=e.settings.bp||backpack(),e.titleElement=document.querySelector(e.settings.titleSelector),e.settings.parseDOM&&e.setupRoutes(e.settings.viewSelector),a.addEventListener("hashchange",function(){e.swapView()}),e.settings.initView&&e.swapView(),e};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.4",bp:c,setupRoutes:function(){for(var a,c,d,e,f=this,g=b.extend(b.parseLocalStorage("routes")||{},f.settings.routes),h=0,i=document.querySelectorAll(f.settings.viewSelector);h<i.length;h++)c=i[h],c.hasAttributes()&&c.hasAttribute("id")&&(e=c.getAttribute("id"),a=c.hasAttribute("data-path")?c.getAttribute("data-path"):"",d=f.createRoute(e,a,c),g[d.path]=d);f.settings.routes=g,localStorage.setItem("routes",JSON.stringify(g)),f.bp&&""===f.getParameterByName("_escaped_fragment_")&&f.bp.updateViews(f.settings.viewSelector)},createRoute:function(a,b,c){return{viewId:a,path:b.split("\\:")[0],params:b.split("\\:").slice(1),title:c.hasAttribute("data-title")?c.getAttribute("data-title"):that.settings.defaultTitle,transition:c.hasAttribute("data-transition")?c.getAttribute("data-transition"):"",paramValues:{},callback:c.hasAttribute("data-callback")?c.getAttribute("data-callback"):"load"+a,unload:c.hasAttribute("data-unload")?c.getAttribute("data-unload"):"unload"+a}},matchRoute:function(a,b){b||(b=this.settings.routes);var c,d,e,f,g,h={};if(b.hasOwnProperty(a))return b[a];for(c in b)if(b.hasOwnProperty(c)&&(d=b[c],g=new RegExp("\\b"+d.path+"\\b","gi"),""!==d.path&&0===a.search(g))){for(e=a.replace(d.path,"").split("/").slice(1),f=0;f<e.length;f++)h[d.params[f]]=e[f];d.paramValues=h;break}return d},animation:c,getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},transitionend:{animation:"animationend",webkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd"},cssPrefix:function(a){if(!a)return"";var b,c,d,e,f=document.body.style;if(a.indexOf("-")>=0){for(d=(""+a).split("-"),b=1,c=d.length;c>b;b++)d[b]=d[b].substr(0,1).toUpperCase()+d[b].substr(1);a=d.join("")}if(a in f)return a;for(a=a.substr(0,1).toUpperCase()+a.substr(1),e=["webkit","Moz","ms","O"],b=0,c=e.length;c>b;b++)if(e[b]+a in f)return e[b]+a;return""},swapView:function(){var d,e,f,g=this,h=a.location.hash,i=g.getParameterByName("_escaped_fragment_"),j="#"!==h?h.replace("#!",""):"",k=(j.split(":").slice(1),j.split(":")[0]),l=document.querySelectorAll("."+this.settings.currentClass);if(l.length)for(;l.length>1;)l[l.length-1].parentNode.removeChild(l[l.length-1]);l=l[0],d=g.matchRoute(k),e=g.getAnimation(d),g.animation=e,d!==c?(_gaq!==c&&_gaq.push(["_trackPageview",k]),g.ensureViewAvailable(l,d.viewId),f=document.getElementById(d.viewId),f&&(l&&(g.hasAnimations()&&e?(l.addEventListener(g.transitionend[g.cssPrefix("animation")],function(a){g.endSwapAnimation.call(g,a,l,f)}),b.addClass(l,"animated out "+e),b.removeClass(l,"in")):g.endSwapAnimation.call(g,c,l,f)),b.addClass(f,g.settings.currentClass),b.addClass(f,"animated"),b.addClass(f,e),b.addClass(f,"in"),g.setDocumentTitle(d),d.callback&&g.makeCallback(d))):""===i?a.location.hash="#!"+this.settings.NotFoundRoute:f=b.addClass(this.settings.viewSelector,g.settings.currentClass)},getAnimation:function(a){return a?this.animations[a.transition]||this.settings.viewTransition:this.settings.viewTransition},endSwapAnimation:function(a,b,c){var d=this,e=d.animation;b.classList?(b.classList.remove(d.settings.currentClass),b.classList.remove(e),b.classList.remove("out"),c.classList.remove(e),c.classList.remove("in")):(b.className.replace(d.settings.currentClass," "),b.className.replace(e," "),b.className.replace("out"," "),c.className.replace(e," "),c.className.replace("in"," ")),b&&bp&&b.parentNode&&b.parentNode.removeChild(b)},ensureViewAvailable:function(a,b){if(this.bp){var c=this.bp.getViewData(b),d=this.createFragment(c.content);a?a.parentNode.insertBefore(d,a):document.querySelector(this.settings.mainWrappperSelector).appendChild(d)}},makeCallback:function(b){var c,d,e=b.callback,f=e.split(".");if(e){for(e=a[f[0]],c=1;c<f.length;c++)1===c&&(d=e),e=e[f[c]];b.paramValues=b.paramValues||{},e&&e.call(d,b.paramValues)}},setDocumentTitle:function(a){var b,c=a.title;if(""!==c){for(b=0;b<a.params.length;b++)c=c.replace(":"+a.params[b],a.paramValues[a.params[b]]);document.title=c}},createFragment:function(a){var b=document.createDocumentFragment(),c=document.createElement("div");for(c.innerHTML=a;c.firstChild;)b.appendChild(c.firstChild);return b},hasAnimations:function(){var a=!1,b=document.createElement("div"),d="animation",e="",f="Webkit Moz O ms Khtml".split(" "),g="",h=0;if(b.style.animationName&&(a=!0),a===!1)for(h=0;h<f.length;h++)if(b.style[f[h]+"AnimationName"]!==c){g=f[h],d=g+"Animation",e="-"+g.toLowerCase()+"-",a=!0;break}return a},animations:{slide:"slide",fade:"fade",flip:"flip"},settings:{routes:[],viewSelector:".content-pane",currentClass:"current",mainWrappperSelector:"#main",NotFoundView:"NotFound",NotFoundRoute:"404",defaultTitle:"A Single Page Site with Routes",titleSelector:".view-title",autoSetTitle:!0,parseDOM:!0,initView:!0,viewTransition:"slide"}},d.fn.init.prototype=d.fn,a.spa=d}(window,$),function(a,b){"use strict";var c=function(a){var b=new c.fn.init;return b.settings=$.extend({},b.settings,a),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.1",hasOnLine:"onLine"in navigator,onLine:navigator.onLine,ajaxSettings:{cache:!1,dataType:"json",method:"get",type:"json",contentType:"application/json",localCache:!0,cacheTTL:5,isCacheValid:function(){return!0},success:function(){}},serialize:function(a){var b,c=[];for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c.join("&")},ajaxPrefilter:function(c){if(a.localStorage&&c.localCache){var d,e=this,f=c.cacheTTL||5,g=a.localStorage,h=c.dataType||c.type,i=c.cacheKey||c.url.replace(/jQuery.*/,"")+c.type+(c.data?e.serialize(c.data):""),j=g.getItem(i+"cachettl");if(d=e.getExistingData({isCacheValid:c.isCacheValid,ttl:j,cacheKey:i}))return(0===h.indexOf("json")||0===h.indexOf("jsonp"))&&(d=JSON.parse(d)),c.success(d),void 0;c.success&&(c.realsuccess=c.success),c.success=function(a){if(b===a)return c.realsuccess&&c.realsuccess(a),void 0;var d=a;(0===h.indexOf("json")||0===h.indexOf("jsonp"))&&(d=JSON.stringify(a)),e.saveResultToStorage(i,d,j,f),c.realsuccess&&c.realsuccess(a)},reqwest(c).fail(function(a){e.failCallback(a)})}},saveResultToStorage:function(b,c,d,e){var f=a.localStorage;try{f.setItem(b,c),d&&"expired"!==d||f.setItem(b+"cachettl",+new Date+36e5*e)}catch(g){f.removeItem(b),f.removeItem(b+"cachettl"),options.cacheError&&options.cacheError(g,b,c)}},getExistingData:function(a){var b=a.ttl,c=a.cacheKey;return a.isCacheValid&&!a.isCacheValid()&&localStorage.removeItem(c),b&&b<+new Date&&(localStorage.removeItem(c),localStorage.removeItem(c+"cachettl"),b="expired"),localStorage.getItem(c)},failCallback:function(a){a.responseText&&console.error(JSON.stringify(a.responseText))},doAJAX:function(a){return this.ajaxPrefilter(a)},getData:function(a,b,c){var d=$.extend({},this.ajaxSettings,c,{url:a});return"jsonp"===c.type&&(delete d.contentType,delete d.dataType),this.doAJAX(d)},postData:function(a){var b=$.extend({},this.ajaxSettings,{type:"POST"},a.ajaxSettings,{url:a.url});return reqwest(b).fail(function(a){that.failCallback(a)})},putData:function(a){var b=$.extend({},this.ajaxSettings,{type:"PUT"},a.ajaxSettings,{url:a.url});return reqwest(b).fail(function(a){that.failCallback(a)})},deleteData:function(a){var b=$.extend({},this.ajaxSettings,{type:"DELETE"},a.ajaxSettings,{url:a.url});return reqwest(b).fail(function(a){that.failCallback(a)})}},c.fn.init.prototype=c.fn,a.rqData=c}(window),function(a,b){"use strict";var c={topMenu:[{title:"home",iconClass:"home-icon",url:"#!"},{title:"in theaters",iconClass:"in-theaters-icon",url:"#!movies/InTheaters"},{title:"opening",iconClass:"opening-icon",url:"#!movies/Opening"},{title:"coming soon",iconClass:"coming-soon-icon",url:"#!movies/CommingSoon"}],subMenu:[]},d=function(b){var e=new d.fn.init(b);return e.settings=$.extend({},e.settings,b),e.bp=e.settings.bp||backpack(),e.data=e.settings.data||rqData(),e.tmpl=e.settings.tmpl||Mustache,e.compileTemplates(),toolbar(".toolbar",{menuItems:c}),deeptissue(".hamburger-nav").tap(function(){$.toggle(document.querySelector(".main-nav"))}),deeptissue(".main-nav > a").tap(function(){e.hideBurgerMenu()}),a.addEventListener("resize",function(){for(var a in e.resizeEvents)e.resizeEvents.hasOwnProperty(a)&&e.resizeEvents[a].call(e)}),e.bindBackButton(),e};return d.fn=d.prototype={constructor:d,init:function(){return this},version:"0.0.1",bp:b,data:b,tmpl:b,mainTitle:document.querySelector(".view-title"),hideBurgerMenu:function(){var b=a.innerWidth;b>601&&720>b&&(document.querySelector(".main-nav").style.display="none")},movieTypes:{Opening:"Opening",TopBoxOffice:"Top Box Office",CommingSoon:"Comming Soon",InTheaters:"In Theaters"},setMainTitle:function(a){this.mainTitle.textContent=a},bindBackButton:function(){deeptissue(document.querySelector(".win-backbutton")).tap(function(){a.history.back(1)})},templates:{},compileTemplates:function(){var a,b=this,c=b.bp.getTemplates(!0);for(a in c)this.templates[a]=b.tmpl.compile(c[a])},showLoading:function(a){"string"==typeof a&&(document.querySelector(a).innerHTML="<img class='ajax-loading' src='http://images.professionalaspnet.com/ajax-loader.gif'/>")},mergeData:function(a,c,d){if("string"!=typeof a||"string"!=typeof c||d===b||null===d)return console.error("missing argument in mergeData"),void 0;var e=document.querySelector(a);e.length&&e.length>0&&(e=e[0]),this.templates[c]&&(e.innerHTML=this.templates[c](d))},resizeEvents:{},viewWidth:0,setMoviePanelWidth:function(b,c){b=b||".movie-poster-div",c=c||10;var d=document.querySelector(b),e=a.innerWidth,f=473,g=205;d&&(e>1024?(e=f+Math.floor(c/2)*g,d.style.width=e+"px"):e>600&&(e=Math.ceil(c/2)*g,d.style.width=e+"px"))},panorama:b,_panoramaSetup:!1,hasTouch:a.navigator.msPointerEnabled||"ontouchstart"in a,setupPanorama:function(b,c){b=b||".panorama-container",c=$.extend({maxHeight:Number.MAX_VALUE,maxWidth:Number.MAX_VALUE},c);var d=this,e=document.querySelector(b);if(c.maxWidth&&c.maxWidth>=a.innerWidth){d.panorama=panorama(e,$.extend(c,{speed:600,headerHeight:80,peekWidth:50,contentResize:function(){for(var b=document.querySelectorAll(".panel-v-scroll"),c=0;c<b.length;c++)b[c].style.height=a.innerHeight-115-32+"px"}}));var f=deeptissue(e,{swipeRightThreshold:35,swipeLeftThreshold:-35,swipeUpThreshold:35,swipeDownThreshold:35});f.swipeRight(function(b){c.maxWidth>=a.innerWidth&&d.panorama.moveRight(b)}).swipeLeft(function(b){c.maxWidth>=a.innerWidth&&d.panorama.moveLeft(b)})}if(!d._panoramaSetup){var g=document.querySelector(".pxs_next"),h=document.querySelector(".pxs_prev");d.hasTouch||(d.setPanoramaWings(),g&&g.addEventListener("click",function(a){d.panorama.moveLeft(a)}),h&&h.addEventListener("click",function(a){d.panorama.moveRight(a)})),d._panoramaSetup=!0}},setPanoramaWings:function(){var a=document.querySelector(".pxs_navigation");a&&(a.style.display="block")},settings:{appTitle:"Modern Web Movies",InTheatersHomeCount:15,CommingSoonHomeCount:15,SearchCount:20}},d.fn.init.prototype=d.fn,a.movieApp=d}(window),function(a,b){"use strict";movieApp.fn.rtRoot="http://api.rottentomatoes.com/api/public/v1.0/",movieApp.fn.apiKey="q7g5vgxauv72mgvghgtbpdbc",movieApp.fn.defaultPageLimit=12,movieApp.fn.TopBoxOfficeMovies=function(a,b,c){return this.getRottenTomatoesList("box_office",a,b,c)},movieApp.fn.OpeningMovies=function(a,b,c){return this.getRottenTomatoesList("opening",a,b,c)},movieApp.fn.InTheatersMovies=function(a,b,c){return this.getRottenTomatoesList("in_theaters",a,b,c)},movieApp.fn.CommingSoonMovies=function(a,b,c){return this.getRottenTomatoesList("upcoming",a,b,c)},movieApp.fn.SearchMovies=function(a,b,c,d){b=b||1,a=a||e.defaultPageLimit;var e=this,f=e.rtRoot+"movies.json?apikey="+this.apiKey+"&q="+c+"&page_limit="+a+"&page="+b,g=function(a){a.movies=e.setMoviePoster(a.movies),d&&d.call(e,a),e.storeMoviesInStorage(a.movies)};return this.data.getData(f,!1,{type:"jsonp",success:g})},movieApp.fn.loadMovieDetails=function(a,b){var c=this,d=c.rtRoot+"movies/"+a+".json?apikey="+c.apiKey,e=function(a){b&&b(c.setMoviePoster(a)[0])};return this.data.getData(d,!1,{type:"jsonp",success:e})},movieApp.fn.storeMoviesInStorage=function(b){if(b&&b.length){var c,d=this,e=0,f="",g=a.localStorage;for(e=0;e<b.length;e++)c=b[e],f=d.rtRoot+"movies/"+c.id+".json?apikey="+d.apiKey+"jsonp",g.setItem(f,JSON.stringify(c)),g.setItem(f+"cachettl",+new Date+2592e5)}},movieApp.fn.getRottenTomatoesList=function(a,b,c,d){var e=this,f=function(a){a.movies=e.setMoviePoster(a.movies),d&&d.call(e,a),e.storeMoviesInStorage(a.movies)};return this.getRottenTomatoes(a,b,c,f)},movieApp.fn.getRottenTomatoes=function(a,b,c,d){c=c||1,b=b||that.defaultPageLimit;var e=this.rtRoot+"lists/movies/"+a+".json?apikey="+this.apiKey+"&page_limit="+b+"&page="+c;return this.data.getData(e,!1,{type:"jsonp",success:d})},movieApp.fn.setMoviePoster=function(b){b.length||(b=[b]);var c=0,d=parseInt(a.innerWidth,10);for(c=0;c<b.length;c++)b[c].poster=600>d?b[c].posters.profile:d>1024?0===c?b[c].posters.original:b[c].posters.detailed:b[c].posters.detailed;return b},movieApp.fn.getNews=function(a){return this.data.getData("js/mocks/news.json",!1,{success:a})},movieApp.fn.mergeInFakeShowtimes=function(a){var c=[{theater:"The Mystic",showtimes:["12:20","3:05","5:45","7:50","10:10"]},{theater:"The Marquee",showtimes:["12:05","2:35","4:45","6:50","8:10","10:45"]},{theater:"The Pantagees",showtimes:["12:05","2:35","4:45","6:50","8:10","10:45"]}],d=0;if(a.length!=b)for(d=0;d<a.length-1;d++)a[d].showtimes=c;else a.showtimes=c;return a}}(window),function(){movieApp.fn.setMovieGridSize=function(){var a=document.querySelector(".movie-poster-div"),b=document.querySelectorAll(".movie-target"),c=b.length,d=170,e=120,f={width:parseInt(main.clientWidth,10),height:parseInt(main.clientHeight,10)},g=0;f.width>600?(g=Math.floor(f.height/d),a.style.width=e*(c/g)+"px",a.style.height=g*d+"px"):(a.style.width="",a.style.height="")}}(window),function(a){"use strict";movieApp.fn.unloadHomeView=function(){delete this.resizeEvents.manageHomeView},movieApp.fn.loadHomeView=function(){var a=this;a.setupPanorama(),a.setMainTitle("Modern Web Movies"),a.InTheatersMovies(50,1,function(b){b&&a.mergeData(".top-box-list","MoviePosterGridTemplate",b)}),a.OpeningMovies(50,1,function(b){b&&a.mergeData(".opening-movie-list","MoviePosterGridTemplate",b)}),a.TopBoxOfficeMovies(50,1,function(b){b&&a.mergeData(".movies-near-me-list","MoviePosterGridTemplate",b)}),a.CommingSoonMovies(50,1,function(b){b&&a.mergeData(".comming-soon-list","MoviePosterGridTemplate",b)}),document.querySelectorAll(".panel-v-scroll"),a.resizeEvents.manageHomeView=a.setPanoramaWidth},movieApp.fn.viewWidth=a.innerWidth,movieApp.fn.setPanoramaWidth=function(){for(var a=this,b=0,c=a.viewWidth>600?50:30,d=a.viewWidth-c,e=document.querySelector(".panorama-panels"),f=document.querySelectorAll(".single-panel");b<f.length;b++)f[b].style.width=d+"px";e.style.width=f.length*d+"px"},movieApp.fn.setMovieGridSize=function(){var a=document.querySelector(".movie-poster-div"),b=document.querySelectorAll(".movie-target"),c=b.length,d=170,e=120,f={width:parseInt(main.clientWidth,10),height:parseInt(main.clientHeight,10)},g=0;f.width>600&&a?(g=Math.floor(f.height/d),a.style.width=e*(c/g)+"px",a.style.height=g*d+"px"):(a.style.width="",a.style.height="")}}(window),function(a){"use strict";movieApp.fn.loadMovieView=function(c){c&&c.id||console.error("No Movie Id Requested");var d=this;d.loadMovieDetails(c.id,function(a){a&&d.renderMovieDetails(a)}),b=a.width},movieApp.fn.renderMovieDetails=function(a){if(a){var b=this;b.mergeData(".movie-details-panel","movieDetailsPosterTemplate",a),b.mergeData(".movie-description","movieDetailsDescriptionTemplate",a),b.mergeData(".cast-name-list","movieDetailsCastTemplate",a),b.mergeData(".movie-showtime-list","MovieShowtimeTemplate",b.mergeInFakeShowtimes(a)),b.setupPanorama(".panorama-container",{maxWidth:610}),b.setMainTitle(a.title),b.bindPanelTitles(),b.manageMovieView(),b.resizeEvents.manageMovieView=b.manageMovieView
}},movieApp.fn.bindPanelTitles=function(){var b=document.querySelector(".movie-showtime-list"),c=document.querySelector(".cast-name-list"),d=document.querySelector(".movie-description"),e=document.querySelector(".movie-showtimes-panel > .panel-title"),f=document.querySelector(".movie-cast-panel > .panel-title"),g=document.querySelector(".movie-description-panel > .panel-title"),h=document.getElementById("showReview");d.show(),deeptissue(".movie-description-panel > .panel-title").tap(function(){var i=a.innerWidth;i>600&&820>i&&(b.hide(),h.hide(),c.hide(),d.show(),e.removeClass("selected"),f.removeClass("selected"),g.addClass("selected"))}),deeptissue(".movie-cast-panel > .panel-title").tap(function(){var i=a.innerWidth;i>600&&820>i&&(b.hide(),h.hide(),c.show(),d.hide(),c.style.position="relative",c.style.left="-130px",e.removeClass("selected"),f.addClass("selected"),g.removeClass("selected"))}),deeptissue(".movie-showtimes-panel > .panel-title").tap(function(){var i=a.innerWidth;i>600&&820>i&&(b.show(),h.show(),c.hide(),d.hide(),b.style.position="relative",b.style.left="-260px",h.style.position="relative",h.style.left="-200px",h.style.top="30px",e.addClass("selected"),f.removeClass("selected"),g.removeClass("selected"))}),deeptissue(h).tap(function(){document.querySelector(".movie-review-panel").show(),document.querySelector(".movie-details-panel").hide(),document.querySelector(".movie-cast-panel").hide(),document.querySelector(".movie-showtimes-panel").hide(),document.querySelector(".movie-description-panel").hide()}),deeptissue(document.getElementById("reviewCancel")).tap(function(){document.querySelector(".movie-review-panel").hide(),document.querySelector(".movie-details-panel").show(),document.querySelector(".movie-cast-panel").show(),document.querySelector(".movie-showtimes-panel").show(),document.querySelector(".movie-description-panel").show()})},movieApp.fn.unloadMovieView=function(){delete this.resizeEvents.manageMovieView};var b=0;movieApp.fn.manageMovieView=function(){var c=a.innerWidth;if(610>c&&c>820&&b>610&&820>b){var d=document.querySelector(".movie-showtime-list");document.querySelector(".cast-name-list"),d.style.position="",d.style.left="",showReview.style.position="",showReview.style.left="",showReview.style.top=""}b=c},movieApp.fn.clearInlineRelativePostition=function(a){a.legth||(a=[a]);for(var b=0;b<a.length;b++)a[b].style.position="",a[b].style.left=""}}(window),function(a){movieApp.fn.loadMoviesView=function(b){var c=this,d=b.movieType||"TopBoxOffice";c[d+"Movies"](50,1,function(b){b&&(c.setMoviePanelWidth(".movie-poster-div",b.movies.length),a.addEventListener("resize",function(){c.setMoviePanelWidth(".movie-poster-div",b.movies.length)}),c.mergeData(".movie-poster-div","MoviePosterGridTemplate",b))}),c.setMainTitle(c.movieTypes[d])}}(window);var bp=backpack(),data=rqData(),movie=movieApp({bp:bp,data:data,tmpl:Mustache}),_spa=spa({bp:bp,defaultPage:"homeview",viewWrapper:"#main",viewTransition:"slide",defaultTitle:"Modern Web Movies"});$.hideUrlBar();